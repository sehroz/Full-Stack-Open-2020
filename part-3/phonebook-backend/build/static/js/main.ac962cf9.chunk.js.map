{"version":3,"sources":["component/Filter.js","component/PersonForm.js","component/Persons.js","services/persons.js","component/Msg.js","App.js","index.js"],"names":["Filter","filterInput","handleFilter","value","onChange","PersonForm","handleInput","newName","newNumber","addPerson","onSubmit","name","type","Persons","list","deletePerson","map","person","key","number","onClick","id","baseUrl","axios","get","then","res","data","newPerson","post","put","delete","Msg","msg","className","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterInput","setMsg","useEffect","personService","initialPersons","catch","err","setTimeout","updatePerson","find","changedPerson","returnedPerson","length","filter","toLowerCase","includes","e","target","preventDefault","window","confirm","alert","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ac962cf9.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ filterInput, handleFilter }) => {\n  return (\n    <div>\n      filter shown with <input value={filterInput} onChange={handleFilter} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({ handleInput, newName, newNumber, addPerson }) => {\n  return (\n    <div>\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input value={newName} onChange={handleInput} name=\"name\" />\n        </div>\n        <div>\n          number:\n          <input value={newNumber} onChange={handleInput} name=\"number\" />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ list, deletePerson }) => {\n  return (\n    <div>\n      {list.map((person) => (\n        <p key={person.name}>\n          {person.name} {person.number}\n          <button onClick={() => deletePerson(person.name, person.id)}>\n            delete\n          </button>\n        </p>\n      ))}\n    </div>\n  );\n};\n\nexport default Persons;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(`${baseUrl}`);\n  return request.then((res) => res.data);\n};\n\nconst createPerson = (newPerson) => {\n  const request = axios.post(`${baseUrl}`, newPerson);\n  return request.then((res) => res.data);\n};\n\nconst updatePerson = (newPerson) => {\n  const request = axios.put(`${baseUrl}/${newPerson.id}`, newPerson);\n  return request.then((res) => res.data);\n};\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request;\n};\n\nexport default {\n  getAll,\n  createPerson,\n  updatePerson,\n  deletePerson,\n};\n","import React from \"react\";\nimport \"./message.css\";\n\nconst Msg = ({ msg }) => {\n  if (msg === null) {\n    return null;\n  }\n  if (msg.type === \"success\") {\n    return <div className=\"msg success\">{msg.msg}</div>;\n  }\n  if (msg.type === \"fail\") {\n    return <div className=\"msg fail\">{msg.msg}</div>;\n  }\n  return null;\n};\n\nexport default Msg;\n","import React, { useState, useEffect } from \"react\";\n\nimport Filter from \"./component/Filter\";\nimport PersonForm from \"./component/PersonForm\";\nimport Persons from \"./component/Persons\";\nimport personService from \"./services/persons\";\nimport Msg from \"./component/Msg\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterInput, setFilterInput] = useState(\"\");\n  const [msg, setMsg] = useState(null);\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then((initialPersons) => setPersons(initialPersons))\n      .catch((err) => {\n        setMsg({ msg: `Did not get people list: ${err}`, type: \"success\" });\n        setTimeout(() => setMsg(null), 5000);\n      });\n  }, []);\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n\n    if (\n      persons.find(\n        (person) =>\n          person.name === newPerson.name && person.number !== newPerson.number\n      )\n    ) {\n      return window.confirm(\n        `${newPerson.name} is already added to phonebook, replace the old number with a new one?`\n      )\n        ? updatePerson(newPerson)\n        : null;\n    } else if (\n      persons.find(\n        (person) =>\n          person.name === newPerson.name && person.number === newPerson.number\n      )\n    ) {\n      alert(\"Please change number to update this person.\");\n    } else\n      personService\n        .createPerson(newPerson)\n        .then((returnedPerson) => {\n          setPersons([...persons, returnedPerson]);\n          setMsg({ msg: `Added ${returnedPerson.name}`, type: \"success\" });\n          setTimeout(() => setMsg(null), 5000);\n          setNewNumber(\"\");\n        })\n        .catch(() => {\n          setMsg({ msg: `Cannot add person ${newPerson.name}`, type: \"fail\" });\n          setTimeout(() => setMsg(null), 5000);\n        });\n  };\n\n  const deletePerson = (name, id) => {\n    return window.confirm(`Delete ${name}?`)\n      ? personService\n          .deletePerson(id)\n          .then(() => {\n            setPersons(persons.filter((person) => person.id !== id));\n            setMsg({ msg: `${name} deleted`, type: \"success\" });\n            setTimeout(() => setMsg(null), 5000);\n          })\n          .catch(() => {\n            setMsg({\n              msg: `Information of ${name} has already been removed from server`,\n              type: \"fail\",\n            });\n            setTimeout(() => setMsg(null), 5000);\n            setPersons(persons.filter((person) => person.id !== id));\n          })\n      : null;\n  };\n\n  const updatePerson = (newPerson) => {\n    const person = persons.find((person) => person.name === newPerson.name);\n\n    const changedPerson = { ...person, number: newPerson.number };\n\n    personService.updatePerson(changedPerson).then((returnedPerson) => {\n      setPersons(\n        persons.map((person) =>\n          person.id !== changedPerson.id ? person : returnedPerson\n        )\n      );\n      setMsg(\n        `Number changed for ${changedPerson.name} to ${changedPerson.number}`\n      );\n      setTimeout(() => setMsg(null), 5000);\n    });\n  };\n\n  const handleInput = (e) => {\n    return e.target.name === \"name\"\n      ? setNewName(e.target.value)\n      : e.target.name === \"number\"\n      ? setNewNumber(e.target.value)\n      : null;\n  };\n\n  const handleFilter = (e) => {\n    setFilterInput(e.target.value);\n  };\n\n  const list =\n    filterInput.length > 0\n      ? persons.filter((person) =>\n          person.name.toLowerCase().includes(filterInput.toLowerCase())\n        )\n      : persons;\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Msg msg={msg} />\n      <Filter filterInput={filterInput} handleFilter={handleFilter} />\n\n      <h3>Add a new</h3>\n\n      <PersonForm\n        newName={newName}\n        newNumber={newNumber}\n        handleInput={handleInput}\n        addPerson={addPerson}\n      />\n\n      <h3>Numbers</h3>\n\n      <Persons list={list} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}